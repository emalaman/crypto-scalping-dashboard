<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Crypto Scalping Dashboard - Polymarket</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://unpkg.com/lightweight-charts@4.1.0/dist/lightweight-charts.standalone.production.js"></script>
  <style>
    body { background: #0a0a0a; color: #e5e5e5; font-family: 'Inter', sans-serif; }
    .card { background: #121212; border: 1px solid #333; border-radius: 0.5rem; transition: all .2s; }
    .card:hover { transform: translateY(-2px); box-shadow: 0 4px 12px rgba(0,0,0,.3); border-color: #1565c0; }
    .badge { font-size: .75rem; padding: .25rem .5rem; border-radius: 4px; font-weight: 600; border: 1px solid; }
    .badge-BUY { background: rgba(34, 197, 94, 0.2); color: #22c55e; border-color: #22c55e; }
    .badge-STRONG_BUY { background: rgba(34, 197, 94, 0.3); color: #4ade80; border-color: #4ade80; }
    .badge-SELL { background: rgba(239, 68, 68, 0.2); color: #ef4444; border-color: #ef4444; }
    .badge-STRONG_SELL { background: rgba(239, 68, 68, 0.3); color: #f87171; border-color: #f87171; }
    .badge-NEUTRAL { background: rgba(156, 163, 175, 0.2); color: #9ca3af; border-color: #9ca3af; }
    .chart-container { height: 200px; width: 100%; background: #1a1a1a; border-radius: 0.25rem; overflow: hidden; }
    .text-green { color: #22c55e; }
    .text-red { color: #ef4444; }
    .grid { display: grid; gap: 1rem; }
    .grid-cols-1 { grid-template-columns: repeat(1, minmax(0, 1fr)); }
    .lg-grid-cols-2 { grid-template-columns: repeat(2, minmax(0, 1fr)); }
    .p-3 { padding: 0.75rem; }
    .p-4 { padding: 1rem; }
    .mb-2 { margin-bottom: 0.5rem; }
    .mb-4 { margin-bottom: 1rem; }
    .text-sm { font-size: 0.875rem; }
    .text-xs { font-size: 0.75rem; }
    .text-lg { font-size: 1.125rem; }
    .font-bold { font-weight: 700; }
    .font-semibold { font-weight: 600; }
    .text-gray-400 { color: #9ca3af; }
    .text-gray-500 { color: #6b7280; }
    .flex { display: flex; }
    .justify-between { justify-content: space-between; }
    .items-center { align-items: center; }
    .gap-2 { gap: 0.5rem; }
    .gap-4 { gap: 1rem; }
    .min-h-screen { min-height: 100vh; }
    .max-w-6xl { max-width: 72rem; }
    .mx-auto { margin-left: auto; margin-right: auto; }
    .px-4 { padding-left: 1rem; padding-right: 1rem; }
    .py-8 { padding-top: 2rem; padding-bottom: 2rem; }
    .mt-12 { margin-top: 3rem; }
  </style>
</head>
<body class="min-h-screen bg-dark-900">
  <div class="max-w-6xl mx-auto px-4 py-8">
    <header class="mb-10 text-center">
      <h1 class="text-4xl font-bold text-white border-b-2 border-primary-700 pb-2 inline-block">ðŸš€ Crypto Scalping Dashboard</h1>
      <p class="text-gray-400 text-lg mt-2">
        Top <span id="total-count" class="text-white font-semibold">0</span> crypto opportunities Â· Spread 1.5%-50% Â· Vol > $10k
        <br>Last updated: <span id="last-update" class="text-primary-400 font-mono"></span>
      </p>
      <button onclick="location.reload()" class="mt-4 px-4 py-2 bg-primary-900/50 border border-primary-600 rounded hover:bg-primary-800/50 text-primary-200">ðŸ”„ Refresh</button>
    </header>

    <div class="flex justify-center mb-8 flex-wrap gap-4 items-center">
      <div class="flex items-center gap-2">
        <label class="text-gray-300">Signal:</label>
        <select id="signal-filter" onchange="applyFilters()" class="px-4 py-2 bg-dark-800 border border-gray-700 rounded text-white">
          <option value="All">All Signals</option>
          <option value="STRONG_BUY">STRONG_BUY</option>
          <option value="BUY">BUY</option>
          <option value="NEUTRAL">NEUTRAL</option>
          <option value="SELL">SELL</option>
          <option value="STRONG_SELL">STRONG_SELL</option>
        </select>
      </div>
      <div class="flex items-center gap-2">
        <label class="text-gray-300">Max Spread:</label>
        <select id="spread-filter" onchange="applyFilters()" class="px-4 py-2 bg-dark-800 border border-gray-700 rounded text-white">
          <option value="All">All</option>
          <option value="2">â‰¤ 2%</option>
          <option value="3">â‰¤ 3%</option>
          <option value="5">â‰¤ 5%</option>
          <option value="10">â‰¤ 10%</option>
        </select>
      </div>
    </div>

    <div id="stats" class="grid grid-cols-2 lg:grid-cols-4 gap-4 mb-8"></div>

    <div id="grid" class="grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8"></div>

    <footer class="text-center py-8 text-gray-500 text-sm border-t border-gray-800 mt-12">
      <p>Data from Polymarket Gamma API + Binance 15min charts Â· Filters: Spread 1.5%-50% Â· Vol > $10k Â· Auto-refresh 5min</p>
    </footer>
  </div>

  <script>
    // Data generated at build time
    const rawData = [{"id":"540844","question":"Will bitcoin hit $1m before GTA VI?","category":"Crypto","yes":0.485,"no":0.515,"yesSpread":0.015000000000000013,"noSpread":0.015000000000000013,"maxSpread":0.015000000000000013,"underpricedSide":"YES","underpricedPrice":0.485,"signal":"BUY","volume":3080994.327868,"liquidity":158741.4384,"updatedAt":"2026-02-11T15:31:58.030189Z","timeLeft":14631801485,"marketUrl":"https://polymarket.com/event/what-will-happen-before-gta-vi/will-bitcoin-hit-1m-before-gta-vi-872","cryptoSymbol":"BTCUSDT","candleData":[{"time":1770734700000,"open":68234.89,"high":68593.18,"low":67920.74,"close":68460.4,"volume":489.11529},{"time":1770735600000,"open":68460.4,"high":69165.75,"low":68300.9,"close":68656,"volume":564.95119},{"time":1770736500000,"open":68656,"high":69332,"low":68549.23,"close":69224.17,"volume":345.03235},{"time":1770737400000,"open":69224.17,"high":69519.72,"low":69182.59,"close":69286.4,"volume":420.47427},{"time":1770738300000,"open":69286.39,"high":69434.51,"low":69112.14,"close":69293.37,"volume":345.93081},{"time":1770739200000,"open":69293.37,"high":69720,"low":68945.23,"close":69679.8,"volume":435.31408},{"time":1770740100000,"open":69679.81,"high":69810.35,"low":69261.48,"close":69425.24,"volume":483.33032},{"time":1770741000000,"open":69425.24,"high":69672.72,"low":69271.31,"close":69487.98,"volume":254.73597},{"time":1770741900000,"open":69487.98,"high":69608.98,"low":69301,"close":69517.71,"volume":220.70056},{"time":1770742800000,"open":69517.71,"high":69540.05,"low":69309.35,"close":69393.67,"volume":162.02704},{"time":1770743700000,"open":69393.68,"high":69819.4,"low":69350.81,"close":69671.23,"volume":256.35737},{"time":1770744600000,"open":69671.23,"high":69993.65,"low":69628.66,"close":69882.28,"volume":293.66416},{"time":1770745500000,"open":69882.28,"high":69945.99,"low":69706.95,"close":69925.31,"volume":187.73573},{"time":1770746400000,"open":69925.31,"high":69943.44,"low":69563.53,"close":69584.7,"volume":202.23107},{"time":1770747300000,"open":69584.71,"high":69593.57,"low":68880,"close":68903.74,"volume":239.3909},{"time":1770748200000,"open":68903.73,"high":69115.61,"low":68775.54,"close":68993.86,"volume":214.22712},{"time":1770749100000,"open":68993.86,"high":69044,"low":68604.63,"close":68894.36,"volume":241.88317},{"time":1770750000000,"open":68894.36,"high":68989.81,"low":68690.32,"close":68909.66,"volume":343.28456},{"time":1770750900000,"open":68909.66,"high":68950,"low":68720.01,"close":68932,"volume":137.832},{"time":1770751800000,"open":68931.99,"high":69290,"low":68889.21,"close":69205.05,"volume":165.08632},{"time":1770752700000,"open":69205.05,"high":69303.99,"low":69001.64,"close":69062.01,"volume":159.69818},{"time":1770753600000,"open":69062,"high":69136.91,"low":68738.63,"close":68760.85,"volume":83.1187},{"time":1770754500000,"open":68760.86,"high":68907.32,"low":68712.26,"close":68812.75,"volume":121.35421},{"time":1770755400000,"open":68812.75,"high":68956.39,"low":68629.47,"close":68901.61,"volume":102.01743},{"time":1770756300000,"open":68901.61,"high":68973.8,"low":68707.97,"close":68753.7,"volume":119.41593},{"time":1770757200000,"open":68753.69,"high":69005.45,"low":68730.72,"close":68830.97,"volume":94.89563},{"time":1770758100000,"open":68830.97,"high":68927.72,"low":68651.9,"close":68652.27,"volume":66.44899},{"time":1770759000000,"open":68652.28,"high":68652.28,"low":68362,"close":68462.55,"volume":167.69644},{"time":1770759900000,"open":68462.55,"high":68726.5,"low":68462.54,"close":68656.21,"volume":73.84658},{"time":1770760800000,"open":68656.22,"high":68795.45,"low":68600,"close":68612.69,"volume":82.33935},{"time":1770761700000,"open":68612.69,"high":68700,"low":68566.8,"close":68686.95,"volume":72.09085},{"time":1770762600000,"open":68686.94,"high":68860.4,"low":68651.9,"close":68665.71,"volume":64.7891},{"time":1770763500000,"open":68665.71,"high":68763.41,"low":68636.01,"close":68707.18,"volume":70.26283},{"time":1770764400000,"open":68707.18,"high":68763.33,"low":68595.53,"close":68717.98,"volume":55.80544},{"time":1770765300000,"open":68717.95,"high":68717.95,"low":68506.2,"close":68663.25,"volume":67.91659},{"time":1770766200000,"open":68663.25,"high":68793.12,"low":68590,"close":68785.35,"volume":46.19294},{"time":1770767100000,"open":68785.35,"high":68860.09,"low":68726.4,"close":68841.29,"volume":52.3883},{"time":1770768000000,"open":68841.28,"high":68978.88,"low":68784.47,"close":68801.85,"volume":85.40068},{"time":1770768900000,"open":68801.84,"high":69242.42,"low":68797.58,"close":69186.76,"volume":164.41771},{"time":1770769800000,"open":69186.76,"high":69225.63,"low":69018.75,"close":69068.81,"volume":65.96456},{"time":1770770700000,"open":69068.8,"high":69244.45,"low":69036.06,"close":69201.14,"volume":121.8581},{"time":1770771600000,"open":69201.14,"high":69292.88,"low":69089.12,"close":69229.38,"volume":84.2333},{"time":1770772500000,"open":69229.38,"high":69265.73,"low":68931.9,"close":68959.72,"volume":70.9071},{"time":1770773400000,"open":68959.54,"high":69115.45,"low":68914.73,"close":69073.8,"volume":68.30921},{"time":1770774300000,"open":69073.8,"high":69118.81,"low":68945.27,"close":68982,"volume":80.07734},{"time":1770775200000,"open":68982,"high":69168.52,"low":68941.4,"close":68941.41,"volume":80.99006},{"time":1770776100000,"open":68941.41,"high":69133.03,"low":68941.41,"close":69057.2,"volume":70.05265},{"time":1770777000000,"open":69057.21,"high":69129.67,"low":68869.82,"close":68869.82,"volume":117.38539},{"time":1770777900000,"open":68869.82,"high":68869.82,"low":68603.4,"close":68677.33,"volume":129.92536},{"time":1770778800000,"open":68677.34,"high":68751.91,"low":68521.17,"close":68525.94,"volume":103.34071},{"time":1770779700000,"open":68525.94,"high":68559.76,"low":68011.11,"close":68288.19,"volume":403.45007},{"time":1770780600000,"open":68288.18,"high":68559.64,"low":68262,"close":68427.63,"volume":127.93351},{"time":1770781500000,"open":68427.63,"high":68528.24,"low":68175.96,"close":68187.99,"volume":143.98869},{"time":1770782400000,"open":68188,"high":68325,"low":68021.69,"close":68034,"volume":143.57517},{"time":1770783300000,"open":68034.01,"high":68175.56,"low":67556,"close":67576.63,"volume":534.37079},{"time":1770784200000,"open":67576.63,"high":67718,"low":67368,"close":67516.13,"volume":415.69979},{"time":1770785100000,"open":67516.12,"high":67695.17,"low":67385.88,"close":67584.46,"volume":201.53906},{"time":1770786000000,"open":67584.47,"high":67810,"low":67575,"close":67717.8,"volume":176.32739},{"time":1770786900000,"open":67717.8,"high":67804.15,"low":67546.9,"close":67587.43,"volume":154.21162},{"time":1770787800000,"open":67587.42,"high":67600,"low":67397.86,"close":67440.35,"volume":204.13185},{"time":1770788700000,"open":67440.35,"high":67583.47,"low":67400,"close":67404.28,"volume":209.41446},{"time":1770789600000,"open":67404.28,"high":67491.84,"low":66819.24,"close":66916.36,"volume":596.31006},{"time":1770790500000,"open":66916.36,"high":67171.93,"low":66699.15,"close":67120.96,"volume":482.5408},{"time":1770791400000,"open":67120.97,"high":67171.93,"low":66850.7,"close":66856.01,"volume":226.09664},{"time":1770792300000,"open":66856.01,"high":66907.13,"low":66557.99,"close":66820.32,"volume":536.84925},{"time":1770793200000,"open":66819.84,"high":66977.11,"low":66652.27,"close":66748.13,"volume":302.57184},{"time":1770794100000,"open":66748.14,"high":67019.66,"low":66672.33,"close":67005.98,"volume":330.47507},{"time":1770795000000,"open":67005.99,"high":67215.23,"low":66953.61,"close":67168.14,"volume":345.9173},{"time":1770795900000,"open":67168.14,"high":67254.6,"low":67024.56,"close":67032.72,"volume":314.99498},{"time":1770796800000,"open":67032.71,"high":67134.42,"low":66846.12,"close":66908.09,"volume":239.2529},{"time":1770797700000,"open":66908.08,"high":67076.7,"low":66808.55,"close":66926.17,"volume":286.9824},{"time":1770798600000,"open":66926.16,"high":67053.07,"low":66793.93,"close":67032.6,"volume":198.84858},{"time":1770799500000,"open":67032.6,"high":67036.48,"low":66911.13,"close":66981.07,"volume":146.70095},{"time":1770800400000,"open":66981.08,"high":67110.04,"low":66825.03,"close":66923.72,"volume":237.12145},{"time":1770801300000,"open":66923.71,"high":66978.44,"low":66800.01,"close":66978.43,"volume":171.38615},{"time":1770802200000,"open":66978.43,"high":67001.13,"low":66800,"close":66849.58,"volume":148.73783},{"time":1770803100000,"open":66849.58,"high":66872.03,"low":66716.02,"close":66872.03,"volume":155.72497},{"time":1770804000000,"open":66872.03,"high":66876,"low":66648.63,"close":66748.76,"volume":290.98143},{"time":1770804900000,"open":66748.76,"high":66891.64,"low":66671.81,"close":66865.55,"volume":118.22178},{"time":1770805800000,"open":66865.56,"high":66880.62,"low":66565.08,"close":66732.73,"volume":174.99139},{"time":1770806700000,"open":66732.74,"high":66780.33,"low":66369.49,"close":66531.99,"volume":733.83447},{"time":1770807600000,"open":66531.99,"high":66721.48,"low":66500.84,"close":66666.67,"volume":152.54888},{"time":1770808500000,"open":66666.66,"high":67110.77,"low":66640,"close":66993.06,"volume":253.18692},{"time":1770809400000,"open":66993.06,"high":67043.75,"low":66879.62,"close":66926.9,"volume":356.33194},{"time":1770810300000,"open":66926.9,"high":67091.15,"low":66926.89,"close":67053.03,"volume":249.23527},{"time":1770811200000,"open":67053.03,"high":67299.18,"low":66959.67,"close":67094.16,"volume":471.19479},{"time":1770812100000,"open":67094.16,"high":67424.24,"low":67084.75,"close":67220.85,"volume":404.92345},{"time":1770813000000,"open":67220.85,"high":67307,"low":67018.15,"close":67082.74,"volume":241.84083},{"time":1770813900000,"open":67082.74,"high":67187.31,"low":67020.26,"close":67133.5,"volume":133.24704},{"time":1770814800000,"open":67133.51,"high":67213.29,"low":66840.36,"close":66925.14,"volume":181.84944},{"time":1770815700000,"open":66925.15,"high":67038.67,"low":66799.58,"close":67018.77,"volume":175.7132},{"time":1770816600000,"open":67022.57,"high":67674.3,"low":66882.13,"close":67222.51,"volume":1250.51071},{"time":1770817500000,"open":67222.5,"high":67565.87,"low":66914,"close":67454.49,"volume":365.83893},{"time":1770818400000,"open":67454.49,"high":68834.34,"low":67441.55,"close":68458.52,"volume":964.80078},{"time":1770819300000,"open":68458.53,"high":68582.42,"low":67932,"close":68000,"volume":645.83398},{"time":1770820200000,"open":68000,"high":68245.6,"low":66945.81,"close":67236.43,"volume":722.4597},{"time":1770821100000,"open":67236.42,"high":67426.94,"low":66435.62,"close":66584.6,"volume":794.04613},{"time":1770822000000,"open":66584.61,"high":66799.58,"low":65756,"close":66113.25,"volume":1296.06878},{"time":1770822900000,"open":66113.25,"high":66551.92,"low":65900,"close":66191.99,"volume":664.29365},{"time":1770823800000,"open":66191.99,"high":66504.18,"low":66112.54,"close":66369.5,"volume":164.79224}]},{"id":"553828","question":"Will the Colorado Avalanche win the 2026 NHL Stanley Cup?","category":"Crypto","yes":0.22,"no":0.78,"yesSpread":0.28,"noSpread":0.28,"maxSpread":0.28,"underpricedSide":"YES","underpricedPrice":0.22,"signal":"STRONG_BUY","volume":1194751.255131,"liquidity":96222.71073,"updatedAt":"2026-02-11T15:31:52.234266Z","timeLeft":11953401485,"marketUrl":"https://polymarket.com/event/2026-nhl-stanley-cup-champion/will-the-colorado-avalanche-win-the-2026-nhl-stanley-cup","cryptoSymbol":"AVAXUSDT","candleData":[{"time":1770734700000,"open":8.77,"high":8.8,"low":8.71,"close":8.76,"volume":34077.68},{"time":1770735600000,"open":8.76,"high":8.83,"low":8.74,"close":8.77,"volume":55232.6},{"time":1770736500000,"open":8.76,"high":8.83,"low":8.75,"close":8.81,"volume":24303.88},{"time":1770737400000,"open":8.81,"high":8.85,"low":8.79,"close":8.8,"volume":16335.03},{"time":1770738300000,"open":8.8,"high":8.82,"low":8.76,"close":8.79,"volume":28089.19},{"time":1770739200000,"open":8.78,"high":8.85,"low":8.74,"close":8.85,"volume":42024.72},{"time":1770740100000,"open":8.84,"high":8.85,"low":8.77,"close":8.79,"volume":33754.45},{"time":1770741000000,"open":8.78,"high":8.82,"low":8.77,"close":8.81,"volume":36124.38},{"time":1770741900000,"open":8.8,"high":8.81,"low":8.76,"close":8.78,"volume":23365.05},{"time":1770742800000,"open":8.78,"high":8.78,"low":8.75,"close":8.76,"volume":27129.79},{"time":1770743700000,"open":8.77,"high":8.83,"low":8.76,"close":8.8,"volume":23271.91},{"time":1770744600000,"open":8.8,"high":8.85,"low":8.8,"close":8.83,"volume":40054.93},{"time":1770745500000,"open":8.82,"high":8.84,"low":8.8,"close":8.82,"volume":16292.06},{"time":1770746400000,"open":8.82,"high":8.83,"low":8.78,"close":8.79,"volume":15008.35},{"time":1770747300000,"open":8.78,"high":8.81,"low":8.71,"close":8.73,"volume":25744.48},{"time":1770748200000,"open":8.73,"high":8.74,"low":8.69,"close":8.72,"volume":29077.69},{"time":1770749100000,"open":8.72,"high":8.73,"low":8.67,"close":8.71,"volume":27369.97},{"time":1770750000000,"open":8.71,"high":8.73,"low":8.69,"close":8.71,"volume":14251.85},{"time":1770750900000,"open":8.71,"high":8.72,"low":8.68,"close":8.7,"volume":15802.45},{"time":1770751800000,"open":8.71,"high":8.77,"low":8.7,"close":8.74,"volume":37067.21},{"time":1770752700000,"open":8.74,"high":8.76,"low":8.71,"close":8.72,"volume":17482.12},{"time":1770753600000,"open":8.73,"high":8.74,"low":8.7,"close":8.7,"volume":17807.85},{"time":1770754500000,"open":8.7,"high":8.73,"low":8.7,"close":8.71,"volume":25305.04},{"time":1770755400000,"open":8.71,"high":8.74,"low":8.69,"close":8.73,"volume":28193.22},{"time":1770756300000,"open":8.73,"high":8.74,"low":8.7,"close":8.7,"volume":45287.42},{"time":1770757200000,"open":8.7,"high":8.74,"low":8.7,"close":8.71,"volume":29428.83},{"time":1770758100000,"open":8.71,"high":8.73,"low":8.69,"close":8.69,"volume":31106.51},{"time":1770759000000,"open":8.69,"high":8.7,"low":8.65,"close":8.66,"volume":82555.41},{"time":1770759900000,"open":8.66,"high":8.7,"low":8.66,"close":8.69,"volume":26517.24},{"time":1770760800000,"open":8.69,"high":8.71,"low":8.68,"close":8.7,"volume":47037.33},{"time":1770761700000,"open":8.7,"high":8.75,"low":8.7,"close":8.73,"volume":26596.9},{"time":1770762600000,"open":8.73,"high":8.76,"low":8.73,"close":8.74,"volume":22143.43},{"time":1770763500000,"open":8.74,"high":8.75,"low":8.72,"close":8.72,"volume":11704.84},{"time":1770764400000,"open":8.72,"high":8.74,"low":8.7,"close":8.71,"volume":27840.37},{"time":1770765300000,"open":8.71,"high":8.73,"low":8.7,"close":8.72,"volume":19314.82},{"time":1770766200000,"open":8.72,"high":8.75,"low":8.71,"close":8.74,"volume":17251.71},{"time":1770767100000,"open":8.74,"high":8.76,"low":8.74,"close":8.76,"volume":6553.81},{"time":1770768000000,"open":8.76,"high":8.77,"low":8.73,"close":8.73,"volume":32940.32},{"time":1770768900000,"open":8.73,"high":8.77,"low":8.73,"close":8.77,"volume":18472.77},{"time":1770769800000,"open":8.77,"high":8.78,"low":8.75,"close":8.76,"volume":14245.94},{"time":1770770700000,"open":8.76,"high":8.78,"low":8.75,"close":8.77,"volume":7321.21},{"time":1770771600000,"open":8.77,"high":8.78,"low":8.75,"close":8.77,"volume":17048.41},{"time":1770772500000,"open":8.77,"high":8.77,"low":8.74,"close":8.75,"volume":12426.94},{"time":1770773400000,"open":8.75,"high":8.78,"low":8.75,"close":8.78,"volume":8502.28},{"time":1770774300000,"open":8.78,"high":8.79,"low":8.76,"close":8.77,"volume":4946.07},{"time":1770775200000,"open":8.77,"high":8.81,"low":8.77,"close":8.79,"volume":9778.07},{"time":1770776100000,"open":8.79,"high":8.88,"low":8.78,"close":8.88,"volume":87333.39},{"time":1770777000000,"open":8.88,"high":8.89,"low":8.87,"close":8.88,"volume":22948.7},{"time":1770777900000,"open":8.88,"high":8.88,"low":8.85,"close":8.86,"volume":20914.32},{"time":1770778800000,"open":8.86,"high":8.86,"low":8.83,"close":8.83,"volume":20278.45},{"time":1770779700000,"open":8.83,"high":8.85,"low":8.78,"close":8.84,"volume":54657.53},{"time":1770780600000,"open":8.84,"high":8.97,"low":8.83,"close":8.91,"volume":72099.16},{"time":1770781500000,"open":8.9,"high":8.9,"low":8.87,"close":8.88,"volume":15445.33},{"time":1770782400000,"open":8.87,"high":8.89,"low":8.82,"close":8.83,"volume":46988.78},{"time":1770783300000,"open":8.84,"high":8.84,"low":8.78,"close":8.79,"volume":34264.63},{"time":1770784200000,"open":8.79,"high":8.8,"low":8.73,"close":8.74,"volume":50674.11},{"time":1770785100000,"open":8.74,"high":8.77,"low":8.71,"close":8.74,"volume":34515.17},{"time":1770786000000,"open":8.74,"high":8.77,"low":8.73,"close":8.73,"volume":31807.73},{"time":1770786900000,"open":8.73,"high":8.76,"low":8.71,"close":8.72,"volume":62161.54},{"time":1770787800000,"open":8.72,"high":8.73,"low":8.67,"close":8.67,"volume":27913.07},{"time":1770788700000,"open":8.67,"high":8.7,"low":8.66,"close":8.68,"volume":16584.59},{"time":1770789600000,"open":8.67,"high":8.7,"low":8.59,"close":8.6,"volume":72105.56},{"time":1770790500000,"open":8.6,"high":8.66,"low":8.56,"close":8.65,"volume":86448.89},{"time":1770791400000,"open":8.65,"high":8.65,"low":8.61,"close":8.61,"volume":17238.17},{"time":1770792300000,"open":8.61,"high":8.61,"low":8.55,"close":8.57,"volume":27210.88},{"time":1770793200000,"open":8.57,"high":8.61,"low":8.56,"close":8.57,"volume":24919.85},{"time":1770794100000,"open":8.58,"high":8.59,"low":8.56,"close":8.58,"volume":19016.14},{"time":1770795000000,"open":8.59,"high":8.62,"low":8.58,"close":8.6,"volume":20452.08},{"time":1770795900000,"open":8.59,"high":8.61,"low":8.57,"close":8.59,"volume":19224.89},{"time":1770796800000,"open":8.58,"high":8.59,"low":8.54,"close":8.56,"volume":28627.92},{"time":1770797700000,"open":8.56,"high":8.57,"low":8.54,"close":8.54,"volume":17319.53},{"time":1770798600000,"open":8.54,"high":8.57,"low":8.53,"close":8.56,"volume":15583.9},{"time":1770799500000,"open":8.56,"high":8.57,"low":8.53,"close":8.55,"volume":15174.45},{"time":1770800400000,"open":8.55,"high":8.57,"low":8.53,"close":8.55,"volume":14599.51},{"time":1770801300000,"open":8.55,"high":8.56,"low":8.53,"close":8.55,"volume":22474.57},{"time":1770802200000,"open":8.56,"high":8.57,"low":8.52,"close":8.53,"volume":15422.81},{"time":1770803100000,"open":8.53,"high":8.54,"low":8.52,"close":8.53,"volume":17291.94},{"time":1770804000000,"open":8.53,"high":8.54,"low":8.5,"close":8.52,"volume":40721.05},{"time":1770804900000,"open":8.52,"high":8.54,"low":8.5,"close":8.54,"volume":19840.74},{"time":1770805800000,"open":8.54,"high":8.54,"low":8.48,"close":8.51,"volume":35902.61},{"time":1770806700000,"open":8.51,"high":8.54,"low":8.5,"close":8.53,"volume":33220.68},{"time":1770807600000,"open":8.53,"high":8.56,"low":8.52,"close":8.54,"volume":27174.77},{"time":1770808500000,"open":8.54,"high":8.6,"low":8.52,"close":8.58,"volume":38938.49},{"time":1770809400000,"open":8.58,"high":8.59,"low":8.56,"close":8.57,"volume":20857.07},{"time":1770810300000,"open":8.56,"high":8.6,"low":8.56,"close":8.59,"volume":10669.1},{"time":1770811200000,"open":8.59,"high":8.61,"low":8.56,"close":8.59,"volume":20981.82},{"time":1770812100000,"open":8.59,"high":8.62,"low":8.58,"close":8.6,"volume":23304.41},{"time":1770813000000,"open":8.6,"high":8.61,"low":8.58,"close":8.58,"volume":23113.07},{"time":1770813900000,"open":8.58,"high":8.59,"low":8.57,"close":8.59,"volume":7169.09},{"time":1770814800000,"open":8.59,"high":8.6,"low":8.57,"close":8.58,"volume":14298.7},{"time":1770815700000,"open":8.58,"high":8.6,"low":8.56,"close":8.58,"volume":17639.4},{"time":1770816600000,"open":8.58,"high":8.68,"low":8.58,"close":8.61,"volume":123908.32},{"time":1770817500000,"open":8.62,"high":8.66,"low":8.58,"close":8.66,"volume":49005.59},{"time":1770818400000,"open":8.66,"high":8.9,"low":8.65,"close":8.85,"volume":141811.22},{"time":1770819300000,"open":8.86,"high":8.86,"low":8.74,"close":8.75,"volume":117978.41},{"time":1770820200000,"open":8.74,"high":8.78,"low":8.61,"close":8.65,"volume":72935.6},{"time":1770821100000,"open":8.64,"high":8.66,"low":8.53,"close":8.55,"volume":88044.54},{"time":1770822000000,"open":8.55,"high":8.58,"low":8.43,"close":8.49,"volume":109033},{"time":1770822900000,"open":8.49,"high":8.55,"low":8.46,"close":8.49,"volume":77576.86},{"time":1770823800000,"open":8.49,"high":8.53,"low":8.48,"close":8.51,"volume":31256.91}]}];
    const opportunities = rawData;

    let currentPage = 1, currentSignal = 'All', currentSpreadFilter = 'All';
    const PAGE_SIZE = 12; // 12 per page (6 cards per row on large screens)

    function formatNumber(n) {
      if (n >= 1000000) return (n/1000000).toFixed(1) + 'M';
      if (n >= 1000) return (n/1000).toFixed(1) + 'k';
      return n.toFixed(0);
    }

    function formatPrice(p) {
      return p < 1 ? p.toFixed(3) : p.toFixed(2);
    }

    function getSignalColor(signal) {
      if (signal.includes('BUY')) return 'text-green';
      if (signal.includes('SELL')) return 'text-red';
      return 'text-gray-400';
    }

    function renderStats(filtered) {
      const stats = document.getElementById('stats');
      const avgSpread = (filtered.reduce((sum, o) => sum + o.maxSpread, 0) / filtered.length * 100).toFixed(1);
      const totalVol = filtered.reduce((sum, o) => sum + o.volume, 0);
      const count = filtered.length;

      stats.innerHTML = `
        <div class="card p-4 text-center">
          <div class="text-gray-400 text-xs uppercase">Opportunities</div>
          <div class="text-2xl font-bold text-white">${count}</div>
        </div>
        <div class="card p-4 text-center">
          <div class="text-gray-400 text-xs uppercase">Avg Spread</div>
          <div class="text-2xl font-bold ${avgSpread < 3 ? 'text-green' : avgSpread < 10 ? 'text-orange-400' : 'text-red'}">${avgSpread}%</div>
        </div>
        <div class="card p-4 text-center">
          <div class="text-gray-400 text-xs uppercase">Total Volume</div>
          <div class="text-2xl font-bold text-white">$${formatNumber(totalVol)}</div>
        </div>
        <div class="card p-4 text-center">
          <div class="text-gray-400 text-xs uppercase">With Charts</div>
          <div class="text-2xl font-bold text-blue-400">${filtered.filter(o => o.candleData).length}</div>
        </div>
      `;
    }

    function renderChart(container, candleData, colorScheme = 'default') {
      if (!candleData || candleData.length === 0) {
        container.innerHTML = '<div class="flex items-center justify-center h-full text-gray-500 text-sm">No chart data available</div>';
        return;
      }

      // Take last 50 candles for the chart
      const data = candleData.slice(-50).map(d => ({
        time: Math.floor(d.time / 1000),
        open: d.open,
        high: d.high,
        low: d.low,
        close: d.close
      }));

      const chart = LightweightCharts.createChart(container, {
        width: container.clientWidth,
        height: 200,
        layout: {
          background: { type: 'solid', color: '#1a1a1a' },
          textColor: '#9ca3af',
        },
        grid: {
          vertLines: { color: '#2a2a2a' },
          horzLines: { color: '#2a2a2a' },
        },
        crosshair: {
          mode: 1,
        },
        rightPriceScale: {
          borderColor: '#333',
        },
        timeScale: {
          borderColor: '#333',
          timeVisible: true,
          secondsVisible: false,
        },
      });

      const candlestickSeries = chart.addCandlestickSeries({
        upColor: '#22c55e',
        downColor: '#ef4444',
        borderVisible: false,
        wickUpColor: '#22c55e',
        wickDownColor: '#ef4444',
      });

      candlestickSeries.setData(data);
    }

    function createOpportunityCard(o) {
      const hasChart = !!o.candleData;
      const chartId = `chart-${o.id}`;

      return `
        <div class="card p-4" data-category="Crypto" data-signal="${o.signal}" data-spread="${Math.round(o.maxSpread*100)}">
          <div class="flex justify-between items-start mb-2">
            <h3 class="text-lg font-bold text-white line-clamp-2">${o.question}</h3>
            <span class="badge badge-${o.signal.replace(/_/g, '_')}">${o.signal}</span>
          </div>
          <div class="text-xs text-gray-400 mb-2 flex gap-4">
            <span>Symbol: <span class="text-white font-mono">${o.cryptoSymbol || 'N/A'}</span></span>
            <span>Ends: ${Math.floor(o.timeLeft/(1000*60*60*24))}d</span>
          </div>
          <div class="grid grid-cols-2 gap-4 mb-4">
            <div>
              <div class="text-xs text-gray-400">YES / NO</div>
              <div class="flex gap-2 items-center">
                <span class="text-lg font-bold ${o.underpricedSide === 'YES' ? 'text-green' : ''}">${formatPrice(o.yes)}</span>
                <span class="text-gray-500">/</span>
                <span class="text-lg font-bold ${o.underpricedSide === 'NO' ? 'text-red' : ''}">${formatPrice(o.no)}</span>
              </div>
              <div class="text-xs text-gray-500">Spread: <span class="${o.maxSpread < 0.03 ? 'text-green' : o.maxSpread < 0.1 ? 'text-orange-400' : 'text-red'}">${(o.maxSpread*100).toFixed(2)}%</span></div>
            </div>
            <div>
              <div class="text-xs text-gray-400">Volume / Liquidity</div>
              <div class="text-sm font-bold text-white">$${formatNumber(o.volume)}</div>
              <div class="text-xs text-gray-500">Liq: $${formatNumber(o.liquidity)}</div>
            </div>
          </div>
          ${hasChart ? `<div id="${chartId}" class="chart-container mb-4"></div>` : ''}
          <div class="flex justify-between items-center">
            <span class="text-xs text-gray-400">${new Date(o.updatedAt).toLocaleString()}</span>
            <a href="${o.marketUrl}" target="_blank" class="px-3 py-1 bg-primary-600 hover:bg-primary-700 text-white text-sm rounded transition">View on Polymarket</a>
          </div>
        </div>
      `;
    }

    function applyFilters() {
      currentSignal = document.getElementById('signal-filter').value;
      currentSpreadFilter = document.getElementById('spread-filter').value;
      currentPage = 1;
      render();
    }

    function render() {
      let filtered = opportunities;

      if (currentSignal !== 'All') {
        filtered = filtered.filter(o => o.signal === currentSignal);
      }

      if (currentSpreadFilter !== 'All') {
        const maxSpread = parseFloat(currentSpreadFilter) / 100;
        filtered = filtered.filter(o => o.maxSpread <= maxSpread);
      }

      const totalPages = Math.ceil(filtered.length / PAGE_SIZE);
      const start = (currentPage - 1) * PAGE_SIZE;
      const pageData = filtered.slice(start, start + PAGE_SIZE);

      document.getElementById('total-count').textContent = filtered.length;
      document.getElementById('last-update').textContent = new Date().toLocaleTimeString();

      renderStats(filtered);

      const grid = document.getElementById('grid');
      grid.innerHTML = pageData.map(o => createOpportunityCard(o)).join('');

      // Render charts after DOM update
      setTimeout(() => {
        pageData.forEach(o => {
          if (o.candleData) {
            const container = document.getElementById(`chart-${o.id}`);
            if (container) renderChart(container, o.candleData);
          }
        });
      }, 100);

      // Pagination
      const paginationTop = document.getElementById('pagination-top');
      const paginationBottom = document.getElementById('pagination-bottom');
      let paginationHtml = '';

      if (totalPages > 1) {
        let pages = [];
        if (totalPages <= 7) {
          pages = Array.from({ length: totalPages }, (_, i) => i + 1);
        } else {
          if (currentPage <= 3) pages = [1, 2, 3, 4, 5, '...', totalPages];
          else if (currentPage >= totalPages - 2) pages = [1, '...', totalPages - 4, totalPages - 3, totalPages - 2, totalPages - 1, totalPages];
          else pages = [1, '...', currentPage - 1, currentPage, currentPage + 1, '...', totalPages];
        }

        paginationHtml = pages.map(p => {
          if (p === '...') return `<span class="px-2 text-gray-500">...</span>`;
          return `
            <button class="pagination-btn ${p === currentPage ? 'active' : ''}" onclick="goToPage(${p})">${p}</button>
          `;
        }).join('');
      }

      const pagHtml = `<div class="flex justify-center gap-2">${paginationHtml}</div>`;
      paginationTop.innerHTML = pagHtml;
      paginationBottom.innerHTML = pagHtml;
    }

    function goToPage(page) {
      currentPage = page;
      render();
    }

    // Initial render
    render();

    // Responsive chart resize
    window.addEventListener('resize', () => {
      render();
    });
  </script>
</body>
</html>
